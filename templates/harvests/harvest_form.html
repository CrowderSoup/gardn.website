{% extends "base.html" %}
{% block title %}Harvest URL | Gardn{% endblock %}
{% block content %}
<section class="card auth-card">
  <p class="eyebrow">Save a link</p>
  <h1>Harvest a URL</h1>
  {% if error %}
    <p class="msg">{{ error }}</p>
  {% endif %}
  <form method="post" action="/harvest/{% if request.GET.popup %}?popup=1{% endif %}">
    {% csrf_token %}
    <label for="id_url">URL</label>
    <input id="id_url" type="url" name="url" value="{{ url }}" required placeholder="https://example.com/post" autofocus>

    <label for="id_title">Title</label>
    <input id="id_title" type="text" name="title" value="{{ title }}" placeholder="Optional title">

    <label for="id_note">Note</label>
    <textarea id="id_note" name="note" rows="3" placeholder="Optional note">{{ note }}</textarea>

    <label for="id_tags">Tags</label>
    <input id="id_tags" type="text" name="tags" value="{{ tags }}" placeholder="comma-separated tags (e.g. python, web, tools)">

    {% if micropub_endpoint %}
      <label class="checkbox-label">
        <input type="checkbox" name="post_to_micropub" value="true">
        Post bookmark to my website via Micropub
      </label>
    {% elif can_post_to_mastodon %}
      <label class="checkbox-label">
        <input type="checkbox" name="post_to_mastodon" value="true">
        Post bookmark to Mastodon
      </label>
    {% endif %}

    <button type="submit">Harvest</button>
    {% if request.GET.popup %}<button type="button" onclick="window.close()">Cancel</button>{% endif %}
  </form>
</section>
{% endblock %}

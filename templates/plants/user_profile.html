{% extends "base.html" %}
{% block title %}{{ identity.display_name|default:identity.username }} | Gardn{% endblock %}
{% block content %}
<h1>{{ identity.display_name|default:identity.username }}</h1>
<p class="subtle"><a href="{{ identity.me_url }}">{{ identity.me_url }}</a></p>
{% if identity.photo_url %}
  <p><img class="profile-photo" src="{{ identity.photo_url }}" alt="Photo for {{ identity.display_name|default:identity.username }}" width="96" height="96" loading="lazy"></p>
{% endif %}
{% if identity.bio %}
  <div class="bio">{{ identity.bio|safe }}</div>
{% endif %}
<img class="main-plant" src="/u/{{ identity.username }}/plant.svg" alt="Plant for {{ identity.username }}" width="240" height="192">
<div id="pick-state">
  {% include "picks/_pick_button.html" with picked_identity=identity viewer=viewer has_picked=has_picked pick_count=pick_count %}
</div>

<section>
  <h2>{{ identity.display_name|default:identity.username }}'s picks</h2>
  <div class="grid garden-grid">
    {% for pick in picks %}
      <a class="card garden-card" href="/u/{{ pick.picked.username }}/">
        <div class="plant-frame">
          <img src="/u/{{ pick.picked.username }}/plant.svg" alt="Plant for {{ pick.picked.username }}" width="120" height="96">
        </div>
        <strong class="garden-name">{{ pick.picked.display_name|default:pick.picked.username }}</strong>
        <small class="garden-meta">{{ pick.picked.me_url|cut:"https://"|cut:"http://" }}</small>
      </a>
    {% empty %}
      <p>No picks yet.</p>
    {% endfor %}
  </div>
</section>
{% endblock %}

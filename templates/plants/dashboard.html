{% extends "base.html" %}
{% block title %}Dashboard | Gardn{% endblock %}
{% block content %}
<h1>Your garden</h1>
<section class="card profile-card">
  <h2>{{ identity.display_name|default:identity.username }}</h2>
  <p class="subtle"><a href="{{ identity.me_url }}">{{ identity.me_url }}</a></p>
  {% if identity.photo_url %}
    <p><img class="profile-photo" src="{{ identity.photo_url }}" alt="Photo for {{ identity.display_name|default:identity.username }}" width="72" height="72" loading="lazy"></p>
  {% endif %}
  {% if identity.bio %}
    <div class="bio">{{ identity.bio|safe }}</div>
  {% endif %}
  <img class="main-plant" src="/u/{{ identity.username }}/plant.svg" alt="Your plant" width="180" height="140">
  <h3>Plant widget (iframe)</h3>
  <pre>&lt;iframe src="{{ request.scheme }}://{{ request.get_host }}/embed/{{ identity.username }}/plant/" style="border:0;width:100%;height:100vh;" loading="lazy" referrerpolicy="no-referrer-when-downgrade"&gt;&lt;/iframe&gt;</pre>
  <h3>Plant widget (JS)</h3>
  <pre>&lt;div data-gardn="{{ identity.username }}"&gt;&lt;/div&gt;&lt;script async src="{{ request.scheme }}://{{ request.get_host }}/gardn.js"&gt;&lt;/script&gt;</pre>
  <h3>Blog roll (iframe)</h3>
  <pre>&lt;iframe src="{{ request.scheme }}://{{ request.get_host }}/embed/{{ identity.username }}/roll/" style="border:0;width:100%;height:400px;" loading="lazy" referrerpolicy="no-referrer-when-downgrade"&gt;&lt;/iframe&gt;</pre>
  <h3>Blog roll (JS)</h3>
  <pre>&lt;div data-gardn-roll="{{ identity.username }}"&gt;&lt;/div&gt;&lt;script async src="{{ request.scheme }}://{{ request.get_host }}/gardn.js"&gt;&lt;/script&gt;</pre>
</section>

<section>
  <h2>Your picks</h2>
  <div class="grid garden-grid">
    {% for pick in picks %}
      <a class="card garden-card" href="/u/{{ pick.picked.username }}/">
        <div class="plant-frame">
          <img src="/u/{{ pick.picked.username }}/plant.svg" alt="Plant for {{ pick.picked.username }}" width="120" height="96">
        </div>
        <strong class="garden-name">{{ pick.picked.display_name|default:pick.picked.username }}</strong>
        <small class="garden-meta">{{ pick.picked.me_url|cut:"https://"|cut:"http://" }}</small>
      </a>
    {% empty %}
      <p>No picks yet.</p>
    {% endfor %}
  </div>
</section>
{% endblock %}
